<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Story template</title>

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&display=swap"
    rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-size: 20px;
      font-family: Georgia, 'Times New Roman', Times, serif;
      text-rendering: optimizeLegibility;
    }

    .content {
      max-width: 640px;
      margin: auto;
    }

    .header {
      padding: 3em 0;
    }

    a {
      color: #f05349;
    }

    .footer {
      background: #f4f4f4;
      text-align: center;
      font-size: 0.8em;
      margin-top: 4em;
      padding: 4em 0;
    }

    figure {
      margin: 0;
      padding-bottom: 1.2em;
    }

    figcaption {
      font-size: 0.8em;
      text-align: center;
      margin-top: 0.5em;
      color: #666;
    }

    h1 {
      font-family: 'Lora', Georgia, serif;
      font-weight: bold;
      font-size: 3em;
      line-height: 1.1;
    }

    .subhead {
      font-family: 'Lora', Georgia, serif;
    }

    iframe,
    img,
    video {
      max-width: 100%;
    }

    p {
      line-height: 1.6;
      margin: 0;
      padding-bottom: 1.2em;
    }

    ul {
      margin: 0;
      padding-bottom: 1em;
      line-height: 1.6;
    }

    iframe {
      padding-bottom: 1.2em;
    }

    .full-width figure {
      text-align: center;
    }

    code {
      font-family: 'Courier New', monospace;
      background: #fff880;
    }

    /* Main container layout */
    .scrolly-container {
      display: flex;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      gap: 30px;
    }
  
    /* Chart container (left side) */
    .sticky-thing {
      position: sticky;
      top: 0;
      width: 60%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow: hidden; /* Prevent scrollbar */
    }
  
    /* Datawrapper iframe adjustments */
    .sticky-thing iframe {
      width: 100% !important;
      height: 80vh !important; /* Fits viewport without scrolling */
      border: none;
    }

  
    /* Steps container (right side) */
    .steps-container {
      width: 40%;
      display: flex;
      flex-direction: column;
      justify-content: center; /* Align steps vertically center */
    }
  
    /* Step adjustments - centered with chart */
    .step {
      margin: 40vh 0; /* Creates space between steps */
      padding: 25px;
      background: rgba(255, 255, 255, 0.95);
      border-left: 4px solid #e74c3c;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      transform: translateY(-50%); /* Precise vertical alignment */
    }

        /* Previous styles remain the same, but add: */
    .sticky-thing {
        position: relative;
        height: 100vh;
    }
    
    .chart-container {
        position: absolute;
        width: 100%;
        height: 80vh;
        transition: opacity 0.5s ease;
    }
    
    #chart1 {
        opacity: 1;
        z-index: 2;
    }
    
    #chart2 {
        opacity: 0;
        z-index: 1;
    }
    
    .step.active ~ .sticky-thing #chart1 {
        opacity: 0;
    }
    
    .step.active ~ .sticky-thing #chart2 {
        opacity: 1;
    }
    
    /* Responsive design */
    @media (max-width: 900px) {
      .scrolly-container {
        flex-direction: column;
      }
      .sticky-thing, .steps-container {
        width: 100%;
      }
      .sticky-thing {
        height: auto;
        position: relative;
        margin-bottom: 0;
      }
      .sticky-thing iframe {
        height: 500px !important;
      }
      .steps-container {
        justify-content: flex-start;
      }
      .step {
        margin: 20px 0;
        transform: none;
      }
    }

  </style>
  <link href="scrolly-styles.css" rel="stylesheet">
  <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollama/3.2.0/scrollama.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.3.0/d3.min.js"></script>
</head>

<body>
  <div class="content">
    <div class="header">
      <h1>This is a scrollytelling template where images change in the background</h1>
      <p class="subhead">Here is the subhead or additional content you want to add in</p>
    </div>
    <div class="byline">
      <p>By <a href="https://yatingw24.github.io/">Yating Wang</a></p>
    </div>
    <p>Pork is the backbone of Chinese diets - economical, protein-rich, and deeply cultural. From street-food dumplings to braised belly, it delivers accessible nutrition to hundreds of millions. Despite price fluctuations and modest declines in meat consumption share, as shown in a recent research, pork still accounts for over half of consumer meat expenditures in China. </p>

    <p>In the past decade, the U.S. has been one of China’s top pork suppliers, exporting both muscle meat and edible offals like pig feet. But that trade relationship is now under threat. After President Trump raised the total tariff to 104% on all Chinese imports, China retaliated with another round of tariff, resulting in a total 84% tariff on imported U.S. goods, according to the Office of the Tariff Commission of the State Council.</p>

  </div>


  <section id="scrolly-images" class="scrolly-container">
    <div class="sticky-thing">
      <div class="chart-container" id="chart1">
        <iframe src="https://datawrapper.dwcdn.net/CHART1_ID/" width="100%" height="100%" frameborder="0"></iframe>
      </div>
      <div class="chart-container" id="chart2">
        <iframe src="https://datawrapper.dwcdn.net/CHART2_ID/" width="100%" height="100%" frameborder="0"></iframe>
      </div>
      <figcaption>U.S. Pork Lean Cut Exports to China (2016–2024)</figcaption>
    </div>
    
    <div class="steps-container">
      <div class="step" id="step1">
        <p>Initial market conditions...</p>
      </div>
      <div class="step" id="step2">
        <p>African Swine Fever impact...</p>
      </div>
      <!-- Add more steps as needed -->
    </div>
  </section>



  <div class="content">
    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem
      aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo
      enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui
      ratione voluptatem sequi nesciunt.</p>
    <figure>
      <img
        src="https://static01.nyt.com/images/2024/02/01/multimedia/01eu-hungary-orban-2-ghkw/01eu-hungary-orban-2-ghkw-superJumbo.jpg?quality=75&auto=webp">
      <figcaption>This is an image caption</figcaption>
    </figure>
    <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non
      numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima
      veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur?
    </p>
  </div>


  <div class="footer">
    <div class="content">
      <p>You can find the code for this story <a href="https://github.com/yatingw24/exports">here</a>.
    </div>
  </div>

  <script>
    (() => {
      const scroller = scrollama();
      
      scroller
        .setup({
          parent: document.querySelector("#scrolly-images"),
          step: ".step",
          offset: 0.6
        })
        .onStepEnter(({ element }) => {
          element.classList.add('active');
          
          // Switch to highlighted chart at specific step
          if(element.id === "step3") { // Change this to your trigger step
            document.querySelector('#chart1').style.opacity = 0;
            document.querySelector('#chart2').style.opacity = 1;
          }
        })
        .onStepExit(({ element }) => {
          element.classList.remove('active');
          
          // Revert to original chart when scrolling back
          if(element.id === "step3") {
            document.querySelector('#chart1').style.opacity = 1;
            document.querySelector('#chart2').style.opacity = 0;
          }
        });
  
      window.addEventListener("resize", scroller.resize);
    })();
  </script>

</body>

</html>