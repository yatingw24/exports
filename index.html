<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Story template</title>

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400;1,700&display=swap"
    rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-size: 20px;
      font-family: Georgia, 'Times New Roman', Times, serif;
      text-rendering: optimizeLegibility;
    }

    .content {
      max-width: 640px;
      margin: auto;
    }

    .header {
      padding: 3em 0;
    }

    a {
      color: #f05349;
    }

    .footer {
      background: #f4f4f4;
      text-align: center;
      font-size: 0.8em;
      margin-top: 4em;
      padding: 4em 0;
    }

    figure {
      margin: 0;
      padding-bottom: 1.2em;
    }

    figcaption {
      font-size: 0.8em;
      text-align: center;
      margin-top: 0.5em;
      color: #666;
    }

    h1 {
      font-family: 'Lora', Georgia, serif;
      font-weight: bold;
      font-size: 3em;
      line-height: 1.1;
    }

    .subhead {
      font-family: 'Lora', Georgia, serif;
    }

    iframe,
    img,
    video {
      max-width: 100%;
    }

    p {
      line-height: 1.6;
      margin: 0;
      padding-bottom: 1.2em;
    }

    ul {
      margin: 0;
      padding-bottom: 1em;
      line-height: 1.6;
    }

    iframe {
      padding-bottom: 1.2em;
    }

    .full-width figure {
      text-align: center;
    }

    code {
      font-family: 'Courier New', monospace;
      background: #fff880;
    }

        /* Main container layout */
    .scrolly-container {
        display: flex;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        gap: 30px;
    }

    /* Chart container (left side) */
    .sticky-thing {
        position: sticky;
        top: 20px;
        width: 60%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* Datawrapper iframe adjustments */
    .sticky-thing iframe {
        width: 100% !important;
        height: 70vh !important;
        border: none;
    }

    /* Chart caption styling */
    .sticky-thing figcaption {
        text-align: center;
        font-size: 14px;
        color: #666;
        padding: 10px 0;
        line-height: 1.4;
    }

    /* Steps container (right side) */
    .steps-container {
        width: 40%;
        padding-right: 20px;
    }

    /* Step adjustments */
    .step {
        margin-bottom: 60vh;
        padding: 25px;
        background: rgba(255, 255, 255, 0.9);
        border-left: 4px solid #e74c3c;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    /* Responsive design */
    @media (max-width: 900px) {
        .scrolly-container {
        flex-direction: column;
        }
        .sticky-thing, .steps-container {
        width: 100%;
        }
        .sticky-thing {
        height: auto;
        position: relative;
        top: 0;
        margin-bottom: 30px;
        }
        .sticky-thing iframe {
        height: 500px !important;
        }
        .step {
        margin-bottom: 30vh;
        }
    }
  </style>
  <link href="scrolly-styles.css" rel="stylesheet">
  <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollama/3.2.0/scrollama.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.3.0/d3.min.js"></script>
</head>

<body>
  <div class="content">
    <div class="header">
      <h1>This is a scrollytelling template where images change in the background</h1>
      <p class="subhead">Here is the subhead or additional content you want to add in</p>
    </div>
    <div class="byline">
      <p>By <a href="https://yatingw24.github.io/">Yating Wang</a></p>
    </div>
    <p>Pork is the backbone of Chinese diets - economical, protein-rich, and deeply cultural. From street-food dumplings to braised belly, it delivers accessible nutrition to hundreds of millions. Despite price fluctuations and modest declines in meat consumption share, as shown in a recent research, pork still accounts for over half of consumer meat expenditures in China. </p>

    <p>In the past decade, the U.S. has been one of China’s top pork suppliers, exporting both muscle meat and edible offals like pig feet. But that trade relationship is now under threat. After President Trump raised the total tariff to 104% on all Chinese imports, China retaliated with another round of tariff, resulting in a total 84% tariff on imported U.S. goods, according to the Office of the Tariff Commission of the State Council.</p>

  </div>
  <section id="scrolly-images" class="scrolly-container">
    <div class="sticky-thing">
      <figure>
        <iframe src="https://datawrapper.dwcdn.net/X2Int/1/" width="100%" height="400" frameborder="0"></iframe>
        <figcaption>U.S. Pork Lean Cut Exports to China Plummet as Competitors Expand Market Share<br>
        Share of Chinese pork lean cut imports in percentage by top suppliers (2016–2024)</figcaption>
      </figure>
    </div>
    
    <div class="steps-container">
      <div class="step" id="step1">
        <p>The U.S. emerged as a top beneficiary during the African Swine Fever crisis between 2019 and 2020, when the supply shock turned China into the world’s largest pork importer overnight. </p>
      </div>
    </div>
  </section>

  <section id="scrolly-images" class="scrolly-container">
    <div class="sticky-thing">
      <figure>
        <iframe src="https://datawrapper.dwcdn.net/XkV0Y/8/" width="100%" height="400" frameborder="0"></iframe>
      </figure>
    </div>
    
    <div class="steps-container">
      <div class="step" id="step1">
        <p>  In 2020, U.S.’ exports of fresh, chilled and frozen pork meat peaked at 14% of China’s imports - briefly becoming its second-largest pork supplier after Spain.</p>
      </div>
    </div>
  </section>


  <div class="content">
    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem
      aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo
      enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui
      ratione voluptatem sequi nesciunt.</p>
    <figure>
      <img
        src="https://static01.nyt.com/images/2024/02/01/multimedia/01eu-hungary-orban-2-ghkw/01eu-hungary-orban-2-ghkw-superJumbo.jpg?quality=75&auto=webp">
      <figcaption>This is an image caption</figcaption>
    </figure>
    <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non
      numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima
      veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur?
    </p>
  </div>


  <div class="footer">
    <div class="content">
      <p>You can find the code for this story <a href="https://github.com/yatingw24/exports">here</a>.
    </div>
  </div>

  <script>
    /*************
    
    This is the JavaScript that makes the scrolly work 
    
    *************/

    /* 
    This part attaches a scroll to the element with id="scrolly-images"    
    */
    (() => {
      const scroller = scrollama()

      scroller
        .setup({
          parent: document.querySelector("#scrolly-images"),
          step: ".step",
          offset: 0.6
        })
        .onStepEnter(function ({ element, index, direction }) {
          const event = new CustomEvent("stepin", { detail: { direction: direction } })
          element.dispatchEvent(event)
        })
        .onStepExit(function ({ element, index, direction }) {
          const event = new CustomEvent("stepout", { detail: { direction: direction } })
          if (direction === "up" && element.previousElementSibling) {
            const event = new CustomEvent("stepin", { detail: { direction: direction } })
            element.previousElementSibling.dispatchEvent(event)
          }
        })

      window.addEventListener("resize", scroller.resize)
    })()

    /*
    This part sets up your actions. In this case, it's changing the image in the scrolly container.
    */
    d3.select("#step1").on('stepin', (e) => {
      d3.select(e.target.closest(".scrolly-container")).select("img").attr("src", "image1.jpg")
    })

    d3.select("#step2").on('stepin', (e) => {
      d3.select(e.target.closest(".scrolly-container")).select("img").attr("src", "image2.jpg")
    })

    d3.select("#step3").on('stepin', (e) => {
      d3.select(e.target.closest(".scrolly-container")).select("img").attr("src", "image1.jpg")
    })

    d3.select("#step4").on('stepin', (e) => {
      d3.select(e.target.closest(".scrolly-container")).select("img").attr("src", "image2.jpg")
    })

    d3.select("#step5").on('stepin', (e) => {
      d3.select(e.target.closest(".scrolly-container")).select("img").attr("src", "image1.jpg")
    })
  </script>
  <style>
    /* Change this to adjust the padding between steps */
    .step {
      margin-bottom: 70vh;
    }
  </style>

</body>

</html>